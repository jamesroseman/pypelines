apiVersion: flink.apache.org/v1beta1
kind: FlinkDeployment
metadata:
  name: word_len-cluster
spec:
  flinkConfiguration:
    taskmanager.numberOfTaskSlots: '10'
  flinkVersion: v1_16
  image: beam-python-example:1.16
  imagePullPolicy: Never
  jobManager:
    resource:
      cpu: 2
      memory: 2048Mi
  podTemplate:
    spec:
      containers:
      - name: flink-main-container
        volumeMounts:
        - mountPath: /opt/flink/log
          name: flink-logs
      volumes:
      - emptyDir: {}
        name: flink-logs
  serviceAccount: flink
  taskManager:
    podTemplate:
      spec:
        containers:
        - args:
          - -worker_pool
          image: beam-python-harness:2.56.0
          name: python-harness
          ports:
          - containerPort: 50000
            name: harness-port
    replicas: 1
    resource:
      cpu: 2
      memory: 2048Mi
